(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{730:function(t,e,r){"use strict";var a=r(543),s=r.n(a);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=function t(e){return o(this,t),new s.a(e,{http:window.Iracode.getHttp()})}},760:function(t,e,r){var a=r(838);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r(74)(a,s);a.locals&&(t.exports=a.locals)},837:function(t,e,r){"use strict";r(760)},838:function(t,e,r){(t.exports=r(73)(!1)).push([t.i,"#profile-tabs .vs-tabs--content {\n  padding: 0;\n}\n.vue-form-wizard .wizard-progress-bar {\n  float: right;\n}\n.vue-form-wizard .wizard-card-footer .wizard-footer-left {\n  float: right;\n}\n.vue-form-wizard .wizard-card-footer .wizard-footer-right {\n  float: left;\n}",""])},952:function(t,e,r){"use strict";r.r(e);var a=r(63),s=r.n(a);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,r,a,s,o,n){try{var i=t[o](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,s)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var o=t.apply(e,r);function i(t){n(o,a,s,i,c,"next",t)}function c(t){n(o,a,s,i,c,"throw",t)}i(void 0)}))}}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t,e,r){var a;return a=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==o(a)?a:String(a))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u,d,f,v={data:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.$store.state.auth.userInfo);return{isCodeModalActive:!1,verifyCode:"",userData:{first_name:t.first_name,last_name:t.last_name,mobile:t.mobile||"",email:t.email||"",avatar:t.photoURL,mobile_verified:t.profile?t.profile.mobile_verified:0},avatarPreview:t.photoURL,location:{city:t?t.city:{},province:t?t.province:{}}}},mounted:function(){console.log(this.userData)},computed:{shouldShowMobileVerification:function(){return window.vuexy.mobile_verification}},methods:{advancedResume:function(){console.log(this.$parent)},onCodeSubmit:(f=i(s.a.mark((function t(){var e,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isCodeModalActive=!0,t.next=3,this.$http.post("".concat(window.config.root_url,"/userverification/api/validate"),{mobile:this.userData.mobile,type:"mobile",code:this.verifyCode,reason:"verification"});case 3:if(e=t.sent,!(r=e.data).ok){t.next=13;break}return Iracode.success(r.message),this.isCodeModalActive=!1,this.userData.mobile_verified=!0,t.next=11,this.$auth.handleSessionAuthentication();case 11:t.next=14;break;case 13:Iracode.error(r.message);case 14:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),close:function(){},sendCode:function(){this.$http.post("".concat(window.config.root_url,"/userverification/api/send"),{mobile:this.userData.mobile,type:"mobile",reason:"verification"}),this.isCodeModalActive=!0},onUpload:(d=i(s.a.mark((function t(e){var r,a=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.files&&e.target.files[0]&&(this.userData.avatar=e.target.files[0],(r=new FileReader).onload=function(t){return a.avatarPreview=t.target.result},r.readAsDataURL(e.target.files[0]));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)}),updateProfile:(u=i(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Iracode.loading(),(e=Iracode.objToFormData(this.userData)).append("_method","PUT"),t.next=5,this.$http.post(this.serverUrl("user/profile-information"),e);case 5:return t.sent.data,t.next=9,this.$auth.handleSessionAuthentication();case 9:Iracode.success(this.__("Your profile updated successfully")),Iracode.close_loading();case 11:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})}},p=r(53),m=Object(p.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("vx-card",{attrs:{"no-shadow":""}},[r("div",{staticClass:"flex flex-wrap items-center mb-4"},[r("vs-avatar",{staticClass:"mr-4 mb-4",attrs:{src:t.avatarPreview,size:"70px"}}),t._v(" "),r("div",[r("label",{staticClass:"inline-block",staticStyle:{cursor:"pointer"},attrs:{for:"avatar"}},[r("vs-button",{staticClass:"mr-4 sm:mb-0 mb-2",staticStyle:{"pointer-events":"none"}},[t._v(t._s(t.__("Upload photo")))]),t._v(" "),r("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"avatar",id:"avatar"},on:{change:t.onUpload}})],1)])],1),t._v(" "),r("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[r("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[r("div",{staticClass:"w-11/12"},[r("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("email")},model:{value:t.userData.email,callback:function(e){t.$set(t.userData,"email",e)},expression:"userData.email"}})],1)]),t._v(" "),r("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[r("div",{staticClass:"w-11/12"},[r("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("first name")},model:{value:t.userData.first_name,callback:function(e){t.$set(t.userData,"first_name",e)},expression:"userData.first_name"}})],1)]),t._v(" "),r("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[r("div",{staticClass:"w-11/12"},[r("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("last name")},model:{value:t.userData.last_name,callback:function(e){t.$set(t.userData,"last_name",e)},expression:"userData.last_name"}})],1)]),t._v(" "),r("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[r("div",{staticClass:"w-11/12"},[r("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("mobile")},model:{value:t.userData.mobile,callback:function(e){t.$set(t.userData,"mobile",e)},expression:"userData.mobile"}}),t._v(" "),t.shouldShowMobileVerification?r("div",[null==t.userData.mobile_verified?r("vs-alert",{staticClass:" my-4",attrs:{"icon-pack":"feather",icon:"icon-info",color:"warning"}},[r("span",[t._v("   "+t._s(t.__("Your mobile phone is not verified"))+".   "),r("a",{staticClass:"hover:underline",attrs:{href:"#"},on:{click:t.sendCode}},[t._v(t._s(t.__("Send Code")))])])]):t._e(),t._v(" "),0==t.userData.mobile_verified?r("vs-alert",{staticClass:" my-4",attrs:{"icon-pack":"feather",icon:"icon-info",color:"warning"}},[r("span",[t._v("   "+t._s(t.__("Your mobile phone is not verified"))+".   "),r("a",{staticClass:"hover:underline",attrs:{href:"#"},on:{click:t.sendCode}},[t._v(t._s(t.__("Resend Code")))])])]):t._e()],1):t._e()],1)])],1),t._v(" "),r("div",[r("vs-button",{staticClass:"ml-auto mt-2",on:{click:t.updateProfile}},[t._v(t._s(t.__("Save Changes")))])],1),t._v(" "),r("vs-prompt",{attrs:{title:t.__("Confirm code"),"accept-text":t.__("Confirm"),"cancel-text":t.__("Cancel"),active:t.isCodeModalActive},on:{cancel:function(e){t.verifyCode=""},accept:t.onCodeSubmit,close:t.close}},[r("div",{staticClass:"con-exemple-prompt"},[r("span",[t._v(t._s(t.__("Enter the verification code")))]),t._v(" "),r("vs-input",{staticClass:"mt-3 w-full",attrs:{"vs-placeholder":t.__("Code")},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}})],1)])],1)}),[],!1,null,null,null).exports,h=r(730);function _(t,e,r,a,s,o,n){try{var i=t[o](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,s)}var b,w,y={data:function(){return{form:new h.a({current_password:"",password:"",password_confirmation:""})}},computed:{activeUserInfo:function(){return this.$store.state.AppActiveUser},isDisabled:function(){return!this.form.current_password||!this.form.password||!this.form.password_confirmation}},methods:{changePassword:(b=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.form.put("".concat(window.config.root_url,"/user/password"));case 3:t.sent,Iracode.success(this.__("Your password changed successfully")),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})),w=function(){var t=this,e=arguments;return new Promise((function(r,a){var s=b.apply(t,e);function o(t){_(s,r,a,o,n,"next",t)}function n(t){_(s,r,a,o,n,"throw",t)}o(void 0)}))},function(){return w.apply(this,arguments)}),hasValidationError:function(t){return!(!this.form.errors||!this.form.errors.has(t))||void 0},validationError:function(t){return this.form.errors?this.form.errors.first(t):void 0}}},g={components:{ProfileGeneral:m,ProfileChangePassword:Object(p.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("vx-card",{attrs:{"no-shadow":""}},[r("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:t.hasValidationError("current_password"),"danger-text":t.validationError("current_password"),"label-placeholder":t.__("Old Password")},model:{value:t.form.current_password,callback:function(e){t.$set(t.form,"current_password",e)},expression:"form.current_password"}}),t._v(" "),r("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:t.hasValidationError("password"),"danger-text":t.validationError("password"),"label-placeholder":t.__("New Password")},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),r("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:t.hasValidationError("password_confirmation"),"danger-text":t.validationError("password_confirmation"),"label-placeholder":t.__("Confirm Password")},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}}),t._v(" "),r("div",{staticClass:"flex flex-wrap items-center justify-end"},[r("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:t.isDisabled},on:{click:t.changePassword}},[t._v(t._s(t.__("Save Changes")))]),t._v(" "),r("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"}},[t._v(t._s(t.__("Reset")))])],1)],1)}),[],!1,null,null,null).exports},created:function(){this.$route.query.tab&&(console.log(this.$route.query.tab),this.activeTab=this.$route.query.tab)},data:function(){return{activeTab:0}},computed:{isSmallerScreen:function(){return this.$store.state.windowWidth<768}}},C=(r(837),Object(p.a)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("vs-tabs",{key:t.isSmallerScreen,staticClass:"tabs-shadow-none",attrs:{position:t.isSmallerScreen?"top":"left",id:"profile-tabs"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[r("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-user",label:t.isSmallerScreen?"":t.__("General")}},[r("div",{staticClass:"tab-general md:ml-4 md:mt-0 mt-4 ml-0"},[r("profile-general",{on:{advancedResume:function(e){t.activeTab=1}}})],1)]),t._v(" "),r("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-lock",label:t.isSmallerScreen?"":t.__("Change Password")}},[r("div",{staticClass:"tab-change-pwd md:ml-4 md:mt-0 mt-4 ml-0"},[r("profile-change-password")],1)]),t._v(" "),r("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-info",label:t.isSmallerScreen?"":t.__("Login history")}},[r("div",{staticClass:"tab-info md:ml-4 md:mt-0 mt-4 ml-0"},[r("login-history")],1)])],1)}),[],!1,null,null,null));e.default=C.exports}}]);