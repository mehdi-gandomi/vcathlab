(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{656:function(t,e,s){"use strict";s.r(e);var n=s(63),r=s.n(n),a=s(730),i=s(731),o=s(735);function l(t,e,s,n,r,a,i){try{var o=t[a](i),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(n,r)}function c(t){return function(){var e=this,s=arguments;return new Promise((function(n,r){var a=t.apply(e,s);function i(t){l(a,n,r,i,o,"next",t)}function o(t){l(a,n,r,i,o,"throw",t)}i(void 0)}))}}var p,u,v={components:{},mixins:[i.a,o.a],data:function(){return{form:new a.a({username:"",first_name:"",last_name:"",profession:"1",specialty:"1",mobile:"",email:"",password:""}),model:"Modules\\Admin\\Models\\User",inputs:{username:{type:"vs-input",field_type:"text"},first_name:{type:"vs-input",field_type:"text"},avatar:{type:"filepond",files:[],filepond_options:{"label-idle":"Drag &amp; Drop your files","allow-multiple":!1,"instant-upload":!0,"max-file-size":"2MB","accepted-file-types":"image/jpeg, image/png"}},last_name:{type:"vs-input",field_type:"text"},state:{type:"vs-input",field_type:"text"},country:{type:"vs-input",field_type:"text"},profession:{type:"v-select",field_type:"select",options:[{label:"Fellow",value:"1"},{label:"Medical student",value:"2"},{label:"Physician",value:"3"},{label:"Physician assistant",value:"4"},{label:"Resident",value:"5"},{label:"Other",value:"6"}],selected:{}},specialty:{type:"v-select",field_type:"select",options:[{label:"General cardiologist",value:"1"},{label:"Interventional cardiologist",value:"2"},{label:"Interventional radilogist",value:"3"},{label:"Interventionalelectrophysiologist",value:"4"},{label:"Other",value:"5"}],selected:{}},mobile:{type:"vs-input",field_type:"text"},email:{type:"vs-input",field_type:"text"},email_verified_at:{type:"persian-date-picker",field_type:"datetime"},password:{type:"vs-input",field_type:"text"},two_factor_secret:{type:"vs-textarea",field_type:"textarea"},two_factor_recovery_codes:{type:"vs-textarea",field_type:"textarea"},remember_token:{type:"vs-input",field_type:"text"},city_id:{field_type:"relation",foreign_key:"city_id",relation_name:"city",options:[],selected:{},searchUrl:"/place/api/cities",titleField:"en_name"},province_id:{field_type:"relation",foreign_key:"province_id",relation_name:"province",options:[],selected:{},searchUrl:"/place/api/provinces",titleField:"en_name"}}}},props:{},computed:{},created:(u=c(r.a.mark((function t(){var e,s,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/admin/api/users/".concat(this.$route.params.id));case 2:e=t.sent,(s=e.data).success&&(n=s.data,this.$store.dispatch("setCurrentResource",n),this.populateFormFields(n)),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)}),mounted:function(){},methods:{onSubmit:(p=c(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.form.put("/admin/api/users/".concat(this.$route.params.id));case 2:t.sent.success&&Iracode.success(this.__("User Updated Successfully")),"close"==e?this.$router.push("/admin/users"):this.form.reset();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})}},f=s(53),d=Object(f.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-base"},[s("vx-card",{scopedSlots:t._u([{key:"actions",fn:function(){return[s("vs-button",{attrs:{color:"primary",to:"/admin/users",type:"filled"}},[t._v(t._s(t.__("Back")))])]},proxy:!0}])},[t._v(" "),s("form",{on:{submit:t.onSubmit}},[s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Avatar")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.avatar.type,t._b({tag:"component",staticClass:"w-full",attrs:{imageResizeMode:"cover",danger:t.hasValidationError("avatar"),"danger-text":t.validationError("avatar"),name:"avatar",server:t.uploadServer}},"component",t.inputs.avatar.filepond_options,!1))],1)],1)],1),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("First Name")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.first_name.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("first_name"),"danger-text":t.validationError("first_name"),name:"first_name",type:"text"},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}})],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Last Name")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.last_name.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("last_name"),"danger-text":t.validationError("last_name"),name:"last_name",type:"text"},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Username")))])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.username.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("username"),"danger-text":t.validationError("username"),name:"username",type:"text"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1)],1)],1),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Profession")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.profession.type,{tag:"component",staticClass:"w-full",attrs:{value:t.inputs.profession.selected,danger:t.hasValidationError("profession"),"danger-text":t.validationError("profession"),name:"profession",type:"select",options:t.inputs.profession.options,dir:t.$vs.rtl?"rtl":"ltr"},on:{input:function(e){return t.onSelect("profession",e)}}})],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Specialty")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.specialty.type,{tag:"component",staticClass:"w-full",attrs:{value:t.inputs.specialty.selected,danger:t.hasValidationError("specialty"),"danger-text":t.validationError("specialty"),name:"specialty",type:"select",options:t.inputs.specialty.options,dir:t.$vs.rtl?"rtl":"ltr"},on:{input:function(e){return t.onSelect("specialty",e)}}})],1)],1)],1),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Mobile")))])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.mobile.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("mobile"),"danger-text":t.validationError("mobile"),name:"mobile",type:"text"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Email")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.email.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("email"),"danger-text":t.validationError("email"),name:"email",type:"text"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[s("span",[t._v(t._s(t.__("Password")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[s(t.inputs.password.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("password"),"danger-text":t.validationError("password"),name:"password",type:"text"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"flex justify-end mt-16"},[s("div",{staticClass:"flex"},[s("vs-button",{staticClass:"mr-3 mb-2",attrs:{color:"success"},on:{click:function(){return t.onSubmit("new")}}},[t._v(t._s(t.__("Save and new")))]),t._v(" "),s("vs-button",{staticClass:"mr-3 mb-2",attrs:{color:"success"},on:{click:function(){return t.onSubmit("close")}}},[t._v(t._s(t.__("Save and close")))]),t._v(" "),s("vs-button",{staticClass:"mb-2",attrs:{color:"warning"},on:{click:function(e){return t.form.reset()}}},[t._v(t._s(t.__("Clear")))])],1)])],1)])],1)}),[],!1,null,null,null);e.default=d.exports},730:function(t,e,s){"use strict";var n=s(543),r=s.n(n);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=function t(e){return a(this,t),new r.a(e,{http:window.Iracode.getHttp()})}},731:function(t,e,s){"use strict";var n,r,a,i=s(63),o=s.n(i);function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(s).filter((function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),n.forEach((function(e){c(t,e,s[e])}))}return t}function c(t,e,s){var n;return n=function(t,e){if("object"!=v(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var n=s.call(t,e||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==v(n)?n:String(n))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function p(t,e,s,n,r,a,i){try{var o=t[a](i),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(n,r)}function u(t){return function(){var e=this,s=arguments;return new Promise((function(n,r){var a=t.apply(e,s);function i(t){p(a,n,r,i,o,"next",t)}function o(t){p(a,n,r,i,o,"throw",t)}i(void 0)}))}}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a={data:function(){var t=this;return{uploadServer:{url:window.config.uploadBasePath,timeout:36e6,load:function(t,e,s,n,r,a){t.indexOf("/null")>-1&&(console.log("source",t),r());var i=new Request(t);fetch(i).then((function(t){t.blob().then((function(t){e(t)}))}))},process:{url:"/process",method:"POST",headers:{Authorization:"Bearer ".concat(this.$store.state.auth.accessToken),"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},withCredentials:!1,onload:function(e){return"object"!=v(e)&&(e=JSON.parse(e)),console.log(t.inputs[e.field_name],e.field_name),t.inputs[e.field_name].filepond_options["allow-multiple"]?t.form[e.field_name].push(e.key):t.form[e.field_name]=e.key,e.key},onerror:function(t){return t.data},ondata:function(e){return e.append("model",t.model),t.$route.params.id&&e.append("model_id",t.$route.params.id),e}},revert:"revert",restore:"restore",fetch:"fetch"}}},methods:{getRelationLabel:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];console.log(this,e)},onRelationSelect:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";this.inputs[t].selected=e,this.form[t]=e[s]},handleFilePondInit:function(){console.log("FilePond has initialized")},onSelect:function(t,e){this.inputs[t].selected=e,this.form[t]=e.value},onRelationSearch:(a=u(o.a.mark((function t(e,s,n){var r,a,i,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=s){t.next=2;break}return t.abrupt("return");case 2:return n(!0),r=this.inputs[e],a={},r&&(a["filter[".concat(r.titleField,"]")]=s),t.next=8,this.$http.get(this.inputs[e].searchUrl,{params:a});case 8:if(i=t.sent,!(l=i.data).success){t.next=13;break}return this.inputs[e].options=l.data.items,t.abrupt("return",n(!1));case 13:this.inputs[e].options=[];case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,s){return a.apply(this,arguments)}),hasValidationError:function(t){return!(!this.form.errors||!this.form.errors.has(t))||void 0},validationError:function(t){return this.form.errors?this.form.errors.first(t):void 0},onSelectTableSearch:(r=u(o.a.mark((function t(e,s){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.length){t.next=6;break}return t.next=3,this.$http.post("".concat(window.config.path_prefix,"/api/get_select_table"),l({},this.inputs[e].select_table_options,{search:s}));case 3:n=t.sent,r=n.data,this.inputs[e].options=r.data;case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},created:(n=u(o.a.mark((function t(){var e,s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("before create called"),t.t0=o.a.keys(this.inputs);case 2:if((t.t1=t.t0()).done){t.next=14;break}if(e=t.t1.value,"relation"!==this.inputs[e].field_type){t.next=12;break}return console.log(this.inputs[e]),t.next=8,this.$http.get(this.inputs[e].searchUrl);case 8:s=t.sent,(n=s.data).success&&(this.inputs[e].options=n.data.items),this.inputs[e].options.length&&(Array.isArray(this.inputs[e].selected)||(this.form[e]=this.inputs[e].options[0].id,this.inputs[e].selected=this.inputs[e].options[0]));case 12:t.next=2;break;case 14:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}},735:function(t,e,s){"use strict";var n,r,a=s(63),i=s.n(a);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,s){var n;return n=function(t,e){if("object"!=o(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var n=s.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==o(n)?n:String(n))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function c(t,e,s,n,r,a,i){try{var o=t[a](i),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(n,r)}e.a={created:(n=i.a.mark((function t(){var e,s,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=i.a.keys(this.inputs);case 1:if((t.t1=t.t0()).done){t.next=12;break}if(e=t.t1.value,"relation"!==this.inputs[e].field_type){t.next=10;break}return console.log(this.inputs[e]),t.next=7,this.$http.get(this.inputs[e].searchUrl);case 7:s=t.sent,(n=s.data).success&&(this.inputs[e].options=n.data.items);case 10:t.next=1;break;case 12:case"end":return t.stop()}}),t,this)})),r=function(){var t=this,e=arguments;return new Promise((function(s,r){var a=n.apply(t,e);function i(t){c(a,s,r,i,o,"next",t)}function o(t){c(a,s,r,i,o,"throw",t)}i(void 0)}))},function(){return r.apply(this,arguments)}),methods:{populateFormFields:function(t){var e=this,s={},n=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(s).filter((function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),n.forEach((function(e){l(t,e,s[e])}))}return t}({},this.form);console.log("populating",n,t);var r=function(r){if(e.inputs[r])if("relation"==e.inputs[r].field_type){s[r]=void 0!==t[r]?t[r]:"",console.log(s[r]);var a=e.inputs[r].options.findIndex((function(e){return e.id==t[r]}));console.log("district",a,t[r],e.inputs[r].options),a>-1&&(e.inputs[r].selected=e.inputs[r].options[a])}else if("select"==e.inputs[r].field_type){s[r]=void 0!==t[r]?t[r]:"";var i=e.inputs[r].options.findIndex((function(e){return e.value==t[r]}));i>-1&&(e.inputs[r].selected=e.inputs[r].options[i])}else["filepond","filepond_image"].includes(e.inputs[r].field_type)?(e.inputs[r].files&&Array.isArray(e.inputs[r].files)&&(Array.isArray(t[r])?(console.log(t[r]),t[r].forEach((function(t){e.inputs[r].files.push({source:e.serverUrl(t),options:{type:"local",load:!1}})}))):e.inputs[r].files.push({source:e.serverUrl(t[r]),options:{type:"local",load:!1}})),Array.isArray(n[r])?s[r]=void 0!==t[r]?Array.isArray(t[r])?t[r]:[]:"":s[r]=void 0!==t[r]?t[r]:""):"password"!=e.inputs[r].field_type&&(s[r]=void 0!==t[r]?t[r]:"")};for(var a in n)r(a);this.form.populate(s)}}}}}]);