(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{694:function(e,t,s){"use strict";s.r(t);var r=s(62),n=s.n(r),a=s(757),o=s(758),i=s(762);function l(e,t,s,r,n,a,o){try{var i=e[a](o),l=i.value}catch(e){return void s(e)}i.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var a=e.apply(t,s);function o(e){l(a,r,n,o,i,"next",e)}function i(e){l(a,r,n,o,i,"throw",e)}o(void 0)}))}}var p={components:{},mixins:[o.a,i.a],data:function(){return{form:new a.a({title:"",nightmare:!1,summary:"",short_summary:"",video:"",images:[],featured_image:"",complex_case_category_id:""}),isLoading:!1,model:"Modules\\User\\Models\\ComplexCase",inputs:{title:{type:"vs-input",field_type:"text"},nightmare:{type:"vs-checkbox"},summary:{type:"quill-editor",field_type:"quill"},short_summary:{type:"vs-textarea",field_type:"textarea"},video:{type:"filepond",field_type:"filepond",files:[],filepond_options:{"label-idle":"Drag &amp; Drop your files","allow-multiple":Iracode.toBool(0),"instant-upload":Iracode.toBool(1),"accepted-file-types":"video/mp4, video/x-ms-wmv, video/quicktime"}},featured_image:{type:"filepond",field_type:"filepond_image",files:[],filepond_options:{"label-idle":"Drag &amp; Drop your files","allow-multiple":!1,"instant-upload":!0,"max-file-size":"2MB","accepted-file-types":"image/jpeg, image/png"}},images:{type:"filepond",field_type:"filepond_image",files:[],filepond_options:{"label-idle":"Drag &amp; Drop your files","allow-multiple":!0,"instant-upload":!0,"max-file-size":"2MB","accepted-file-types":"image/jpeg, image/png"}},complex_case_category_id:{field_type:"relation",foreign_key:"complex_case_category_id",relation_name:"complexCaseCategory",options:[],selected:{},searchUrl:"/user/api/complex_case_categories",titleField:"name"}}}},props:{},computed:{},created:function(){var e=this;return c(n.a.mark((function t(){var s,r,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Iracode.loading(),t.next=3,e.$http.get("/user/api/complex_cases/".concat(e.$route.params.id));case 3:s=t.sent,r=s.data,Iracode.close_loading(),r.success&&(a=r.data,e.$store.dispatch("setCurrentResource",a),e.populateFormFields(a)),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{onSubmit:function(e){var t=this;return c(n.a.mark((function s(){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.isLoading=!0,s.next=3,t.form.put("/user/api/complex_cases/".concat(t.$route.params.id));case 3:s.sent.success&&Iracode.success(t.__("Complexcase Updated Successfully")),"close"==e?t.$router.push("/complex_cases"):t.form.reset(),t.isLoading=!1;case 7:case"end":return s.stop()}}),s)})))()}}},u=s(53),v=Object(u.a)(p,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mb-base"},[s("vx-card",{scopedSlots:e._u([{key:"actions",fn:function(){return[s("vs-button",{attrs:{color:"primary",to:"/complex_cases",type:"filled"}},[e._v(e._s(e.__("Back")))])]},proxy:!0}])},[e._v(" "),s("form",{on:{submit:e.onSubmit}},[s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"4"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Category")))])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("v-select",{staticStyle:{width:"100%"},attrs:{dir:e.$vs.rtl?"rtl":"ltr",value:e.inputs.complex_case_category_id.selected,label:"name",filterable:!1,options:e.inputs.complex_case_category_id.options},on:{input:function(t){return e.onRelationSelect("complex_case_category_id",t)},search:function(t,s){return e.onRelationSearch("complex_case_category_id",t,s)}}},[s("template",{slot:"no-options"},[e._v("\n                                    "+e._s(e.__("Type to search"))+"\n                                ")])],2)],1)],1)],1),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"4"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Title")))]),e._v(" "),s("span",{staticClass:"ml-1 text-red"},[e._v("*")])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(e.inputs.title.type,{tag:"component",staticClass:"w-full",attrs:{danger:e.hasValidationError("title"),"danger-text":e.validationError("title"),name:"title",type:"text"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1)],1),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"4"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Is It Nightmare")))])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(e.inputs.nightmare.type,{tag:"component",staticClass:"w-full",attrs:{danger:e.hasValidationError("nightmare"),"danger-text":e.validationError("nightmare"),name:"nightmare",type:"text"},model:{value:e.form.nightmare,callback:function(t){e.$set(e.form,"nightmare",t)},expression:"form.nightmare"}})],1)],1)],1)],1),e._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Short Summary")))]),e._v(" "),s("span",{staticClass:"ml-1 text-red"},[e._v("*")])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(e.inputs.short_summary.type,{tag:"component",staticClass:"w-full",attrs:{danger:e.hasValidationError("short_summary"),"danger-text":e.validationError("short_summary"),name:"short_summary",type:"textarea"},model:{value:e.form.short_summary,callback:function(t){e.$set(e.form,"short_summary",t)},expression:"form.short_summary"}})],1)],1)],1)],1),e._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Summary")))]),e._v(" "),s("span",{staticClass:"ml-1 text-red"},[e._v("*")])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(e.inputs.summary.type,{tag:"component",staticClass:"w-full",attrs:{danger:e.hasValidationError("summary"),"danger-text":e.validationError("summary"),name:"summary",type:"textarea"},model:{value:e.form.summary,callback:function(t){e.$set(e.form,"summary",t)},expression:"form.summary"}})],1)],1)],1)],1),e._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Video")))]),e._v(" "),s("span",{staticClass:"ml-1 text-red"},[e._v("*")])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(e.inputs.video.type,e._b({tag:"component",staticClass:"w-full",attrs:{imageResizeMode:"cover",danger:e.hasValidationError("video"),"danger-text":e.validationError("video"),name:"video",files:e.inputs.video.files,server:e.uploadServer}},"component",e.inputs.video.filepond_options,!1))],1)],1)],1)],1),e._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Featured Image")))]),e._v(" "),s("span",{staticClass:"ml-1 text-red"},[e._v("*")])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(e.inputs.featured_image.type,e._b({tag:"component",staticClass:"w-full",attrs:{imageResizeMode:"cover",danger:e.hasValidationError("featured_image"),"danger-text":e.validationError("featured_image"),name:"featured_image",server:e.uploadServer,files:e.inputs.featured_image.files}},"component",e.inputs.featured_image.filepond_options,!1))],1)],1)],1)],1),e._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[e._v(e._s(e.__("Images")))]),e._v(" "),s("span",{staticClass:"ml-1 text-red"},[e._v("*")])]),e._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(e.inputs.images.type,e._b({tag:"component",staticClass:"w-full",attrs:{imageResizeMode:"cover",danger:e.hasValidationError("images"),"danger-text":e.validationError("images"),name:"images",files:e.inputs.images.files,server:e.uploadServer}},"component",e.inputs.images.filepond_options,!1))],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"flex justify-end mt-16"},[s("div",{staticClass:"flex"},[s("loading-button",{staticClass:"mr-3 mb-2",attrs:{color:"success",loading:e.isLoading},on:{click:function(){return e.onSubmit("close")}}},[e._v(e._s(e.__("Save")))]),e._v(" "),s("loading-button",{staticClass:"mb-2",attrs:{color:"warning",loading:e.isLoading},on:{click:function(t){return e.form.reset()}}},[e._v(e._s(e.__("Clear")))])],1)])],1)])],1)}),[],!1,null,null,null);t.default=v.exports},757:function(e,t,s){"use strict";var r=s(536),n=s.n(r);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function e(t){return a(this,e),new n.a(t,{http:window.Iracode.getHttp()})}},758:function(e,t,s){"use strict";var r=s(62),n=s.n(r);function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function l(e,t,s,r,n,a,o){try{var i=e[a](o),l=i.value}catch(e){return void s(e)}i.done?t(l):Promise.resolve(l).then(r,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(r,n){var a=e.apply(t,s);function o(e){l(a,r,n,o,i,"next",e)}function i(e){l(a,r,n,o,i,"throw",e)}o(void 0)}))}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a={data:function(){var e=this;return{uploadServer:{url:window.config.uploadBasePath,timeout:36e6,load:function(e,t,s,r,n,a){e.indexOf("/null")>-1&&(console.log("source",e),n());var o=new Request(e);fetch(o).then((function(e){e.blob().then((function(e){t(e)}))}))},process:{url:"/process",method:"POST",headers:{Authorization:"Bearer ".concat(this.$store.state.auth.accessToken),"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},withCredentials:!1,onload:function(t){return"object"!=p(t)&&(t=JSON.parse(t)),console.log(e.inputs[t.field_name],t.field_name),e.inputs[t.field_name].filepond_options["allow-multiple"]?e.form[t.field_name].push(t.key):e.form[t.field_name]=t.key,t.key},onerror:function(e){return e.data},ondata:function(t){return t.append("model",e.model),e.$route.params.id&&t.append("model_id",e.$route.params.id),t}},revert:"revert",restore:"restore",fetch:"fetch"}}},methods:{getRelationLabel:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];console.log(this,t)},onRelationSelect:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";this.inputs[e].selected=t,this.form[e]=t[s]},handleFilePondInit:function(){console.log("FilePond has initialized")},onSelect:function(e,t){this.inputs[e].selected=t,this.form[e]=t.value},onRelationSearch:function(e,t,s){var r=this;return c(n.a.mark((function a(){var o,i,l,c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!=t){n.next=2;break}return n.abrupt("return");case 2:return s(!0),o=r.inputs[e],i={},o&&(i["filter[".concat(o.titleField,"]")]=t),n.next=8,r.$http.get(r.inputs[e].searchUrl,{params:i});case 8:if(l=n.sent,!(c=l.data).success){n.next=13;break}return r.inputs[e].options=c.data.items,n.abrupt("return",s(!1));case 13:r.inputs[e].options=[];case 14:case"end":return n.stop()}}),a)})))()},hasValidationError:function(e){return!(!this.form.errors||!this.form.errors.has(e))||void 0},validationError:function(e){return this.form.errors?this.form.errors.first(e):void 0},onSelectTableSearch:function(e,t){var s=this;return c(n.a.mark((function r(){var a,i;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.length){r.next=6;break}return r.next=3,s.$http.post("".concat(window.config.path_prefix,"/api/get_select_table"),o(o({},s.inputs[e].select_table_options),{},{search:t}));case 3:a=r.sent,i=a.data,s.inputs[e].options=i.data;case 6:case"end":return r.stop()}}),r)})))()}},created:function(){var e=this;return c(n.a.mark((function t(){var s,r,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("before create called"),t.t0=n.a.keys(e.inputs);case 2:if((t.t1=t.t0()).done){t.next=14;break}if(s=t.t1.value,"relation"!==e.inputs[s].field_type){t.next=12;break}return console.log(e.inputs[s]),t.next=8,e.$http.get(e.inputs[s].searchUrl);case 8:r=t.sent,(a=r.data).success&&(e.inputs[s].options=a.data.items),e.inputs[s].options.length&&(Array.isArray(e.inputs[s].selected)||(e.form[s]=e.inputs[s].options[0].id,e.inputs[s].selected=e.inputs[s].options[0]));case 12:t.next=2;break;case 14:case"end":return t.stop()}}),t)})))()}}},762:function(e,t,s){"use strict";var r=s(62),n=s.n(r);function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t,s,r,n,a,o){try{var i=e[a](o),l=i.value}catch(e){return void s(e)}i.done?t(l):Promise.resolve(l).then(r,n)}t.a={created:function(){var e,t=this;return(e=n.a.mark((function e(){var s,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.a.keys(t.inputs);case 1:if((e.t1=e.t0()).done){e.next=12;break}if(s=e.t1.value,"relation"!==t.inputs[s].field_type){e.next=10;break}return console.log(t.inputs[s]),e.next=7,t.$http.get(t.inputs[s].searchUrl);case 7:r=e.sent,(a=r.data).success&&(t.inputs[s].options=a.data.items);case 10:e.next=1;break;case 12:case"end":return e.stop()}}),e)})),function(){var t=this,s=arguments;return new Promise((function(r,n){var a=e.apply(t,s);function o(e){i(a,r,n,o,l,"next",e)}function l(e){i(a,r,n,o,l,"throw",e)}o(void 0)}))})()},methods:{populateFormFields:function(e){var t=this,s={},r=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},this.form);console.log("populating",r,e);var n=function(n){if(t.inputs[n])if("relation"==t.inputs[n].field_type){s[n]=void 0!==e[n]?e[n]:"",console.log(s[n]);var a=t.inputs[n].options.findIndex((function(t){return t.id==e[n]}));console.log("district",a,e[n],t.inputs[n].options),a>-1&&(t.inputs[n].selected=t.inputs[n].options[a])}else if("select"==t.inputs[n].field_type){s[n]=void 0!==e[n]?e[n]:"";var o=t.inputs[n].options.findIndex((function(t){return t.value==e[n]}));o>-1&&(t.inputs[n].selected=t.inputs[n].options[o])}else["filepond","filepond_image"].includes(t.inputs[n].field_type)?(t.inputs[n].files&&Array.isArray(t.inputs[n].files)&&(Array.isArray(e[n])?(console.log(e[n]),e[n].forEach((function(e){t.inputs[n].files.push({source:t.serverUrl(e),options:{type:"local",load:!1}})}))):t.inputs[n].files.push({source:t.serverUrl(e[n]),options:{type:"local",load:!1}})),Array.isArray(r[n])?s[n]=void 0!==e[n]?Array.isArray(e[n])?e[n]:[]:"":s[n]=void 0!==e[n]?e[n]:""):"password"!=t.inputs[n].field_type&&(s[n]=void 0!==e[n]?e[n]:"")};for(var i in r)n(i);this.form.populate(s)}}}}}]);