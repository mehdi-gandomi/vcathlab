(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{688:function(t,e,s){"use strict";s.r(e);var r=s(63),a=s.n(r),n=s(730);function o(t,e,s,r,a,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(r,a)}var i,l,c={components:{},mixins:[s(731).a],data:function(){return{form:new n.a({title:"",nightmare:!1,summary:"",short_summary:"",video:"",images:[],featured_image:"",complex_case_category_id:""}),isLoading:!1,model:"Modules\\User\\Models\\ComplexCase",locale:Iracode.$i18n.locale,inputs:{title:{type:"vs-input"},nightmare:{type:"vs-checkbox"},summary:{type:"quill-editor"},short_summary:{type:"vs-textarea"},video:{type:"filepond",files:[],filepond_options:{"label-idle":"Drag &amp; Drop your files","allow-multiple":Iracode.toBool(0),"instant-upload":Iracode.toBool(1),"accepted-file-types":"video/mp4, video/x-ms-wmv, video/quicktime"}},featured_image:{type:"filepond",files:[],filepond_options:{"label-idle":"Drag &amp; Drop your files","allow-multiple":!1,"instant-upload":!0,"max-file-size":"2MB","accepted-file-types":"image/jpeg, image/png"}},images:{type:"filepond",files:[],filepond_options:{"label-idle":"Drag &amp; Drop your files","allow-multiple":!0,"instant-upload":!0,"max-file-size":"2MB","accepted-file-types":"image/jpeg, image/png"}},complex_case_category_id:{field_type:"relation",options:[],selected:{},foreign_key:"complex_case_category_id",relation_name:"complexCaseCategory",searchUrl:"/user/api/complex_case_categories",titleField:"name"}}}},props:{},computed:{},created:function(){},mounted:function(){},methods:{onSubmit:(i=a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.form.post("/user/api/complex_cases");case 3:t.sent.success&&(Iracode.success(this.__("Complexcase Created Successfully")),"close"==e&&this.$router.push("/complex_cases")),this.isLoading=!1;case 6:case"end":return t.stop()}}),t,this)})),l=function(){var t=this,e=arguments;return new Promise((function(s,r){var a=i.apply(t,e);function n(t){o(a,s,r,n,l,"next",t)}function l(t){o(a,s,r,n,l,"throw",t)}n(void 0)}))},function(t){return l.apply(this,arguments)})}},p=s(53),v=Object(p.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-base"},[s("vx-card",{scopedSlots:t._u([{key:"actions",fn:function(){return[s("vs-button",{attrs:{color:"primary",to:"/complex_cases",type:"filled"}},[t._v(t._s(t.__("Back")))])]},proxy:!0}])},[t._v(" "),s("form",{on:{submit:t.onSubmit}},[s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"4"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Category")))])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("v-select",{staticStyle:{width:"100%"},attrs:{dir:t.$vs.rtl?"rtl":"ltr",value:t.inputs.complex_case_category_id.selected,label:"name",filterable:!1,options:t.inputs.complex_case_category_id.options},on:{input:function(e){return t.onRelationSelect("complex_case_category_id",e)},search:function(e,s){return t.onRelationSearch("complex_case_category_id",e,s)}}},[s("template",{slot:"no-options"},[t._v("\n                                    "+t._s(t.__("Type to search"))+"\n                                ")])],2)],1)],1)],1),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"4"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Title")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(t.inputs.title.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("title"),"danger-text":t.validationError("title"),name:"title",type:"text"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1)],1),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"4"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Is It Nightmare?")))])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(t.inputs.nightmare.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("nightmare"),"danger-text":t.validationError("nightmare"),name:"nightmare",type:"text"},model:{value:t.form.nightmare,callback:function(e){t.$set(t.form,"nightmare",e)},expression:"form.nightmare"}})],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Short Summary")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(t.inputs.short_summary.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("short_summary"),"danger-text":t.validationError("short_summary"),name:"short_summary",type:"textarea"},model:{value:t.form.short_summary,callback:function(e){t.$set(t.form,"short_summary",e)},expression:"form.short_summary"}})],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Summary")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(t.inputs.summary.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("summary"),"danger-text":t.validationError("summary"),name:"summary",type:"textarea"},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Video")))])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(t.inputs.video.type,t._b({tag:"component",staticClass:"w-full",attrs:{imageResizeMode:"cover",danger:t.hasValidationError("video"),"danger-text":t.validationError("video"),name:"video",server:t.uploadServer}},"component",t.inputs.video.filepond_options,!1))],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Featured Image")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(t.inputs.featured_image.type,t._b({tag:"component",staticClass:"w-full",attrs:{imageResizeMode:"cover",danger:t.hasValidationError("featured_image"),"danger-text":t.validationError("featured_image"),name:"featured_image",server:t.uploadServer}},"component",t.inputs.featured_image.filepond_options,!1))],1)],1)],1)],1),t._v(" "),s("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s("span",[t._v(t._s(t.__("Images")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"12"}},[s(t.inputs.images.type,t._b({tag:"component",staticClass:"w-full",attrs:{imageResizeMode:"cover",danger:t.hasValidationError("images"),"danger-text":t.validationError("images"),name:"images",server:t.uploadServer}},"component",t.inputs.images.filepond_options,!1))],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"flex justify-end mt-16"},[s("div",{staticClass:"flex"},[s("loading-button",{staticClass:"mr-3 mb-2",attrs:{color:"success",loading:t.isLoading},on:{click:function(){return t.onSubmit("new")}}},[t._v(t._s(t.__("Save and new")))]),t._v(" "),s("loading-button",{staticClass:"mr-3 mb-2",attrs:{color:"success",loading:t.isLoading},on:{click:function(){return t.onSubmit("close")}}},[t._v(t._s(t.__("Save and close")))]),t._v(" "),s("loading-button",{staticClass:"mb-2",attrs:{color:"warning",loading:t.isLoading},on:{click:function(e){return t.form.reset()}}},[t._v(t._s(t.__("Clear")))])],1)])],1)])],1)}),[],!1,null,null,null);e.default=v.exports},730:function(t,e,s){"use strict";var r=s(543),a=s.n(r);function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=function t(e){return n(this,t),new a.a(e,{http:window.Iracode.getHttp()})}},731:function(t,e,s){"use strict";var r,a,n,o=s(63),i=s.n(o);function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){p(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function p(t,e,s){var r;return r=function(t,e){if("object"!=m(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==m(r)?r:String(r))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function v(t,e,s,r,a,n,o){try{var i=t[n](o),l=i.value}catch(t){return void s(t)}i.done?e(l):Promise.resolve(l).then(r,a)}function u(t){return function(){var e=this,s=arguments;return new Promise((function(r,a){var n=t.apply(e,s);function o(t){v(n,r,a,o,i,"next",t)}function i(t){v(n,r,a,o,i,"throw",t)}o(void 0)}))}}function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a={data:function(){var t=this;return{uploadServer:{url:window.config.uploadBasePath,timeout:36e6,load:function(t,e,s,r,a,n){t.indexOf("/null")>-1&&(console.log("source",t),a());var o=new Request(t);fetch(o).then((function(t){t.blob().then((function(t){e(t)}))}))},process:{url:"/process",method:"POST",headers:{Authorization:"Bearer ".concat(this.$store.state.auth.accessToken),"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},withCredentials:!1,onload:function(e){return"object"!=m(e)&&(e=JSON.parse(e)),console.log(t.inputs[e.field_name],e.field_name),t.inputs[e.field_name].filepond_options["allow-multiple"]?t.form[e.field_name].push(e.key):t.form[e.field_name]=e.key,e.key},onerror:function(t){return t.data},ondata:function(e){return e.append("model",t.model),t.$route.params.id&&e.append("model_id",t.$route.params.id),e}},revert:"revert",restore:"restore",fetch:"fetch"}}},methods:{getRelationLabel:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];console.log(this,e)},onRelationSelect:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";this.inputs[t].selected=e,this.form[t]=e[s]},handleFilePondInit:function(){console.log("FilePond has initialized")},onSelect:function(t,e){this.inputs[t].selected=e,this.form[t]=e.value},onRelationSearch:(n=u(i.a.mark((function t(e,s,r){var a,n,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=s){t.next=2;break}return t.abrupt("return");case 2:return r(!0),a=this.inputs[e],n={},a&&(n["filter[".concat(a.titleField,"]")]=s),t.next=8,this.$http.get(this.inputs[e].searchUrl,{params:n});case 8:if(o=t.sent,!(l=o.data).success){t.next=13;break}return this.inputs[e].options=l.data.items,t.abrupt("return",r(!1));case 13:this.inputs[e].options=[];case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,s){return n.apply(this,arguments)}),hasValidationError:function(t){return!(!this.form.errors||!this.form.errors.has(t))||void 0},validationError:function(t){return this.form.errors?this.form.errors.first(t):void 0},onSelectTableSearch:(a=u(i.a.mark((function t(e,s){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.length){t.next=6;break}return t.next=3,this.$http.post("".concat(window.config.path_prefix,"/api/get_select_table"),c(c({},this.inputs[e].select_table_options),{},{search:s}));case 3:r=t.sent,a=r.data,this.inputs[e].options=a.data;case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},created:(r=u(i.a.mark((function t(){var e,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("before create called"),t.t0=i.a.keys(this.inputs);case 2:if((t.t1=t.t0()).done){t.next=14;break}if(e=t.t1.value,"relation"!==this.inputs[e].field_type){t.next=12;break}return console.log(this.inputs[e]),t.next=8,this.$http.get(this.inputs[e].searchUrl);case 8:s=t.sent,(r=s.data).success&&(this.inputs[e].options=r.data.items),this.inputs[e].options.length&&(Array.isArray(this.inputs[e].selected)||(this.form[e]=this.inputs[e].options[0].id,this.inputs[e].selected=this.inputs[e].options[0]));case 12:t.next=2;break;case 14:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}}}]);