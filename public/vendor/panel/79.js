(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{680:function(e,t,a){"use strict";a.r(t);var n=a(62),s=a.n(n),i=a(797),o=a.n(i),r=a(785),l=a(788),c=a(786),u=a(787),d=a(784),p=a(791),m={name:"AddUsers",props:[]},h=a(53),f=Object(h.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("vx-tooltip",{staticClass:"mx-1 larger-icon",attrs:{text:this.__("Add Users")}},[t("vs-button",{attrs:{color:"success",to:"#",type:"filled",icon:"icon-check-circle","icon-pack":"feather"}})],1)}),[],!1,null,null,null).exports;function b(e,t,a,n,s,i,o){try{var r=e[i](o),l=r.value}catch(e){return void a(e)}r.done?t(l):Promise.resolve(l).then(n,s)}function g(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var i=e.apply(t,a);function o(e){b(i,n,s,o,r,"next",e)}function r(e){b(i,n,s,o,r,"throw",e)}o(void 0)}))}}window.XjQuery=o.a;var v=window.Vue,w={mixins:[r.a,l.a,c.a,u.a,p.a],data:function(){return{searchQuery:"",baseUrl:"/accesslevel/api/role_outusers/?role_id=".concat(this.$route.params.id),model:"User",module:"AccessLevel",showCreateButton:!1,columnDefs:[{headerName:this.__("Email"),field:"email",resizable:!0,minWidth:250,checkboxSelection:!0,filter:"agTextColumnFilter"},{headerName:this.__("Username"),field:"username",resizable:!0,filter:"agTextColumnFilter"},{headerName:this.__("Name"),field:"name",resizable:!0,filter:"agTextColumnFilter"},{headerName:this.__("State"),field:"state",resizable:!0,valueFormatter:d.a.checkboxFormatter,cellRenderer:"checkboxCellRenderer",filter:"agSelectColumnFilter",filterParams:{buttons:["apply"],closeOnApply:!0,type:"select",module:"AccessLevel",model:"User"}},{headerName:this.__("Actions"),field:"action",filter:!1,minWidth:150,cellRenderer:"tableActionsRenderer",cellRendererParams:{model:"User",baseRoutePath:"accesslevel/role_outusers",modelPlural:"role_outusers",baseApiPath:"/accesslevel/api",exposeRowId:!0,buttons:[{text:function(){return this.__("Show ".concat(this.params.model))},link:function(){return this.params.data?"/".concat(this.params.baseRoutePath,"/").concat(this.params.data.id):""},color:"primary",icon:"eye"},{text:function(){return this.__("Edit ".concat(this.params.model))},link:function(){return this.params.data?"/".concat(this.params.baseRoutePath,"/").concat(this.params.data.id,"/edit"):""},color:"warning",icon:"edit"}]}}],items:[],selectedUserIds:[]}},mounted:function(){var e=this;window.defFuncs={add:function(){alert("Add();")}};var t=new(v.extend(f));t.$mount(),o()(".ag-grid-table-actions-right").prepend(t.$el),o()(t.$el).click(g(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("added"),e.findUsers(),t.next=4,e.sendUsers();case 4:(a=t.sent)&&a.data.success&&(Iracode.success(e.__("User Added Successfully")),e.$router.push("/accesslevel/roles/".concat(e.$route.params.id,"/users")));case 6:case"end":return t.stop()}}),t)}))))},methods:{findUsers:function(){var e=this;this.selectedUserIds=[],o()('[ref="eCenterContainer"] > .ag-row').each((function(t,a){o()(a).find(".ag-checkbox-input-wrapper.ag-checked").length&&e.selectedUserIds.push(o()(a).find(".row-id").data("id"))}))},sendUsers:function(){return this.selectedUserIds.length?this.$http.post("/accesslevel/api/role_outusers/assign",{role_id:this.$route.params.id,users:this.selectedUserIds}):null}}},x=Object(h.a)(w,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mb-base index-page",attrs:{id:"ag-grid-demo"}},[a("vx-card",[e.shouldShowToolbar?a("IndexToolbar",{attrs:{showCreateButton:!1,parent:this}}):e._e(),e._v(" "),a("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",attrs:{gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowSelection:"multiple",colResizeDefault:"shift",domLayout:"autoHeight",animateRows:!0,modules:e.modules,localeText:e.translations,cacheBlockSize:e.paginationData.limit,rowModelType:e.rowModelType,pagination:!0,paginationPageSize:e.paginationData.limit,suppressPaginationPanel:!0,frameworkComponents:e.frameworkComponents,enableRtl:e.$vs.rtl,overlayLoadingTemplate:e.__("loading")+"..."},on:{"grid-ready":e.onGridReady}}),e._v(" "),e.paginationData.totalPages>1?a("div",{staticClass:"pagination-wrap vs-pagination-primary"},[a("button",{staticClass:"vs-pagination--buttons mx-2",on:{click:e.gotoFirstPage}},[a("vs-icon",{attrs:{"icon-pack":"feather",icon:"icon-chevrons-right"}})],1),e._v(" "),a("vs-pagination",{staticClass:"pagination",attrs:{goto:"",total:e.paginationData.totalPages,max:e.paginationData.maxPageNumbers},on:{change:e.loadPage},model:{value:e.paginationData.currentPage,callback:function(t){e.$set(e.paginationData,"currentPage",t)},expression:"paginationData.currentPage"}}),e._v(" "),a("button",{staticClass:"vs-pagination--buttons mx-2",on:{click:e.gotoLastPage}},[a("vs-icon",{attrs:{"icon-pack":"feather",icon:"icon-chevrons-left"}})],1)],1):e._e()],1)],1)}),[],!1,null,null,null);t.default=x.exports},791:function(e,t,a){"use strict";var n=window.Vue.extend({template:'\n    <td class="pr-6 align-middle block w-full">\n\t<span v-if="params.exposeRowId" class="row-id" :data-id="params.data.id"/>\n        <div class="inline-flex items-center justify-center w-full" >\n            <vx-tooltip v-for="(button, i) in params.buttons" v-if="!handleCallbackOrValue(button.disable)" :key="i" :text="handleCallbackOrValue(button.text)">\n\t\t<vs-button :href="isHref(button.link) && button.link" :to="button.link && button.link.call(getInstance())" @click="button.callback && button.callback.call(getInstance())" :color="handleCallbackOrValue(button.color)" type="relief" style="margin:0 0.2rem" size="small" v-bind="button.$attrs && button.$attrs"><i v-if="button.class || button.icon" :class="button.class ? handleCallbackOrValue(button.class) : \'far fa-lg fa-\'+handleCallbackOrValue(button.icon)"/></vs-button>\n\t</vx-tooltip>\n        </div>\n    </td>\n    ',data:function(){return{value:null}},methods:{getInstance:function(){return this},handleCallbackOrValue:function(e){return"function"==typeof e?e.call(this):e},isHref:function(e){return"function"==typeof e&&(e=e.call(this)),!!e&&("//"==(e=(e+"").trim().toLowerCase()).substr(0,2)||"www."==e.substr(0,4)||~e.indexOf("http:")||~e.indexOf("https:"))}}});t.a={data:function(){return{frameworkComponents:{tableActionsRenderer:n}}},mounted:function(){var e,t;e="\n\t    \t[dir] .vs-button.small:not(.includeIconOnly) { padding: 7px}\n\t    ",(t=window.document).head.appendChild(t.createElement("style")).innerHTML=e}}}}]);