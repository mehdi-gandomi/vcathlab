(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{693:function(t,e,s){"use strict";s.r(e);var r=s(62),a=s.n(r),n=s(766);function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function c(t,e,s,r,a,n,i){try{var o=t[n](i),c=o.value}catch(t){return void s(t)}o.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,s=arguments;return new Promise((function(r,a){var n=t.apply(e,s);function i(t){c(n,r,a,i,o,"next",t)}function o(t){c(n,r,a,i,o,"throw",t)}i(void 0)}))}}var u={components:{},mixins:[s(767).a],data:function(){return{form:{log_name:"",description:"",subject_id:"",subject_type:"",causer_id:"",causer_type:"",system_ip:"",properties:"",created_at:""},model:"Modules\\AccessLevel\\Models\\UserActivity",inputs:{log_name:{type:"vs-input",field_type:"text"},description:{type:"vs-textarea",field_type:"textarea"},subject_id:{type:"vs-input",field_type:"number"},subject_type:{type:"vs-input",field_type:"text"},causer_id:{type:"vs-input",field_type:"number"},causer_type:{type:"vs-input",field_type:"text"},system_ip:{type:"vs-input",field_type:"text"},properties:{type:"vs-textarea",field_type:"textarea"},created_at:{type:"persian-date-picker",field_type:"datetime"}}}},props:{},computed:{},created:function(){var t=this;return l(a.a.mark((function e(){var s,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/accesslevel/api/user_activities/".concat(t.$route.params.id));case 2:s=e.sent,(r=s.data).success&&(n=r.data,t.$store.dispatch("setCurrentResource",n),t.populateFormFields(n));case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){},methods:{onSubmit:function(t){var e=this;return l(a.a.mark((function s(){return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.form.put("/accesslevel/api/user_activities/".concat(e.$route.params.id));case 2:s.sent.success&&Iracode.success(e.__("Useractivity Updated Successfully")),"close"==t?e.$router.push("/accesslevel/user_activities"):e.form.reset();case 5:case"end":return s.stop()}}),s)})))()},populateFormFields:function(t){var e={},s=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},this.form);for(var r in s)this.inputs[r]&&("relation"==this.inputs[r].field_type?e[r]=t[this.inputs[r].foreign_key]?t[this.inputs[r].foreign_key]:"":"password"!=this.inputs[r].field_type&&(e[r]=t[r]?t[r]:""));this.form=new n.a(e)}}},p=s(53),d=Object(p.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-base"},[s("vx-card",{scopedSlots:t._u([{key:"actions",fn:function(){return[s("vs-button",{attrs:{color:"primary",to:"/accesslevel/user_activities",type:"filled"}},[t._v(t._s(t.__("Back")))])]},proxy:!0}])},[t._v(" "),s("form",{on:{submit:t.onSubmit}},[s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Log Name")))])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.log_name.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("log_name"),"danger-text":t.validationError("log_name"),name:"log_name",type:"text"},model:{value:t.form.log_name,callback:function(e){t.$set(t.form,"log_name",e)},expression:"form.log_name"}})],1)])]),t._v(" "),s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Description")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.description.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("description"),"danger-text":t.validationError("description"),name:"description",type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)])])]),t._v(" "),s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Subject Id")))])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.subject_id.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("subject_id"),"danger-text":t.validationError("subject_id"),name:"subject_id",type:"number"},model:{value:t.form.subject_id,callback:function(e){t.$set(t.form,"subject_id",e)},expression:"form.subject_id"}})],1)])]),t._v(" "),s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Subject Type")))])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.subject_type.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("subject_type"),"danger-text":t.validationError("subject_type"),name:"subject_type",type:"text"},model:{value:t.form.subject_type,callback:function(e){t.$set(t.form,"subject_type",e)},expression:"form.subject_type"}})],1)])])]),t._v(" "),s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Causer Id")))])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.causer_id.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("causer_id"),"danger-text":t.validationError("causer_id"),name:"causer_id",type:"number"},model:{value:t.form.causer_id,callback:function(e){t.$set(t.form,"causer_id",e)},expression:"form.causer_id"}})],1)])]),t._v(" "),s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Causer Type")))])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.causer_type.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("causer_type"),"danger-text":t.validationError("causer_type"),name:"causer_type",type:"text"},model:{value:t.form.causer_type,callback:function(e){t.$set(t.form,"causer_type",e)},expression:"form.causer_type"}})],1)])])]),t._v(" "),s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("System Ip")))]),t._v(" "),s("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.system_ip.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("system_ip"),"danger-text":t.validationError("system_ip"),name:"system_ip",type:"text"},model:{value:t.form.system_ip,callback:function(e){t.$set(t.form,"system_ip",e)},expression:"form.system_ip"}})],1)])]),t._v(" "),s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Properties")))])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.properties.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("properties"),"danger-text":t.validationError("properties"),name:"properties",type:"textarea"},model:{value:t.form.properties,callback:function(e){t.$set(t.form,"properties",e)},expression:"form.properties"}})],1)])])]),t._v(" "),s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col w-1/2"},[s("div",{staticClass:"row flex"},[s("div",{staticClass:"vx-col w-1/4 pr-5 flex justify-end items-center"},[s("span",[t._v(t._s(t.__("Created At")))])]),t._v(" "),s("div",{staticClass:"vx-col w-3/4"},[s(t.inputs.created_at.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("created_at"),"danger-text":t.validationError("created_at"),name:"created_at",type:"datetime"},model:{value:t.form.created_at,callback:function(e){t.$set(t.form,"created_at",e)},expression:"form.created_at"}})],1)])])]),t._v(" "),s("div",{staticClass:"flex justify-end mt-16"},[s("div",{staticClass:"flex"},[s("vs-button",{staticClass:"mr-3 mb-2",attrs:{color:"success"},on:{click:function(){return t.onSubmit("close")}}},[t._v(t._s(t.__("Save")))]),t._v(" "),s("vs-button",{staticClass:"mb-2",attrs:{color:"warning"},on:{click:function(e){return t.form.reset()}}},[t._v(t._s(t.__("Clear")))])],1)])])])],1)}),[],!1,null,null,null);e.default=d.exports},766:function(t,e,s){"use strict";var r=s(536),a=s.n(r);function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=function t(e){return n(this,t),new a.a(e,{http:window.Iracode.getHttp()})}},767:function(t,e,s){"use strict";var r=s(62),a=s.n(r);function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function i(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){o(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function c(t,e,s,r,a,n,i){try{var o=t[n](i),c=o.value}catch(t){return void s(t)}o.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,s=arguments;return new Promise((function(r,a){var n=t.apply(e,s);function i(t){c(n,r,a,i,o,"next",t)}function o(t){c(n,r,a,i,o,"throw",t)}i(void 0)}))}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a={data:function(){var t=this;return{uploadServer:{url:window.config.uploadBasePath,timeout:36e6,load:function(t,e,s,r,a,n){t.indexOf("/null")>-1&&(console.log("source",t),a());var i=new Request(t);fetch(i).then((function(t){t.blob().then((function(t){e(t)}))}))},process:{url:"/process",method:"POST",headers:{Authorization:"Bearer ".concat(this.$store.state.auth.accessToken),"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},withCredentials:!1,onload:function(e){return"object"!=u(e)&&(e=JSON.parse(e)),console.log(t.inputs[e.field_name],e.field_name),t.inputs[e.field_name].filepond_options["allow-multiple"]?t.form[e.field_name].push(e.key):t.form[e.field_name]=e.key,e.key},onerror:function(t){return t.data},ondata:function(e){return e.append("model",t.model),t.$route.params.id&&e.append("model_id",t.$route.params.id),e}},revert:"revert",restore:"restore",fetch:"fetch"}}},methods:{getRelationLabel:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];console.log(this,e)},onRelationSelect:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";this.inputs[t].selected=e,this.form[t]=e[s]},handleFilePondInit:function(){console.log("FilePond has initialized")},onSelect:function(t,e){this.inputs[t].selected=e,this.form[t]=e.value},onRelationSearch:function(t,e,s){var r=this;return l(a.a.mark((function n(){var i,o,c,l;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(""!=e){a.next=2;break}return a.abrupt("return");case 2:return s(!0),i=r.inputs[t],o={},i&&(o["filter[".concat(i.titleField,"]")]=e),a.next=8,r.$http.get(r.inputs[t].searchUrl,{params:o});case 8:if(c=a.sent,!(l=c.data).success){a.next=13;break}return r.inputs[t].options=l.data.items,a.abrupt("return",s(!1));case 13:r.inputs[t].options=[];case 14:case"end":return a.stop()}}),n)})))()},hasValidationError:function(t){return!(!this.form.errors||!this.form.errors.has(t))||void 0},validationError:function(t){return this.form.errors?this.form.errors.first(t):void 0},onSelectTableSearch:function(t,e){var s=this;return l(a.a.mark((function r(){var n,o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.length){r.next=6;break}return r.next=3,s.$http.post("".concat(window.config.path_prefix,"/api/get_select_table"),i(i({},s.inputs[t].select_table_options),{},{search:e}));case 3:n=r.sent,o=n.data,s.inputs[t].options=o.data;case 6:case"end":return r.stop()}}),r)})))()}},created:function(){var t=this;return l(a.a.mark((function e(){var s,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("before create called"),e.t0=a.a.keys(t.inputs);case 2:if((e.t1=e.t0()).done){e.next=14;break}if(s=e.t1.value,"relation"!==t.inputs[s].field_type){e.next=12;break}return console.log(t.inputs[s]),e.next=8,t.$http.get(t.inputs[s].searchUrl);case 8:r=e.sent,(n=r.data).success&&(t.inputs[s].options=n.data.items),t.inputs[s].options.length&&(Array.isArray(t.inputs[s].selected)||(t.form[s]=t.inputs[s].options[0].id,t.inputs[s].selected=t.inputs[s].options[0]));case 12:e.next=2;break;case 14:case"end":return e.stop()}}),e)})))()}}}}]);