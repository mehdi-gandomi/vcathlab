(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1051:function(e,t,a){"use strict";a.r(t);var r=a(62),s=a.n(r);function o(e,t,a,r,s,o,n){try{var i=e[o](n),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(r,s)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){o(n,r,s,i,c,"next",e)}function c(e){o(n,r,s,i,c,"throw",e)}i(void 0)}))}}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l={data:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.$store.state.auth.userInfo);return{isCodeModalActive:!1,verifyCode:"",userData:{first_name:e.first_name,last_name:e.last_name,mobile:e.mobile||"",email:e.email||"",avatar:e.photoURL,mobile_verified:e.profile?e.profile.mobile_verified:0},avatarPreview:e.photoURL,location:{city:e?e.city:{},province:e?e.province:{}}}},mounted:function(){console.log(this.userData)},computed:{shouldShowMobileVerification:function(){return window.vuexy.mobile_verification}},methods:{advancedResume:function(){console.log(this.$parent)},onCodeSubmit:function(){var e=this;return n(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isCodeModalActive=!0,t.next=3,e.$http.post("".concat(window.config.root_url,"/userverification/api/validate"),{mobile:e.userData.mobile,type:"mobile",code:e.verifyCode,reason:"verification"});case 3:if(a=t.sent,!(r=a.data).ok){t.next=13;break}return Iracode.success(r.message),e.isCodeModalActive=!1,e.userData.mobile_verified=!0,t.next=11,e.$auth.handleSessionAuthentication();case 11:t.next=14;break;case 13:Iracode.error(r.message);case 14:case"end":return t.stop()}}),t)})))()},close:function(){},sendCode:function(){this.$http.post("".concat(window.config.root_url,"/userverification/api/send"),{mobile:this.userData.mobile,type:"mobile",reason:"verification"}),this.isCodeModalActive=!0},onUpload:function(e){var t=this;return n(s.a.mark((function a(){var r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.target.files&&e.target.files[0]&&(t.userData.avatar=e.target.files[0],(r=new FileReader).onload=function(e){return t.avatarPreview=e.target.result},r.readAsDataURL(e.target.files[0]));case 1:case"end":return a.stop()}}),a)})))()},updateProfile:function(){var e=this;return n(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Iracode.loading(),(a=Iracode.objToFormData(e.userData)).append("_method","PUT"),t.next=5,e.$http.post(e.serverUrl("user/profile-information"),a);case 5:return r=t.sent,r.data,t.next=9,e.$auth.handleSessionAuthentication();case 9:Iracode.success(e.__("Your profile updated successfully")),Iracode.close_loading();case 11:case"end":return t.stop()}}),t)})))()}}},u=a(53),d=Object(u.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"flex flex-wrap items-center mb-4"},[a("vs-avatar",{staticClass:"mr-4 mb-4",attrs:{src:e.avatarPreview,size:"70px"}}),e._v(" "),a("div",[a("label",{staticClass:"inline-block",staticStyle:{cursor:"pointer"},attrs:{for:"avatar"}},[a("vs-button",{staticClass:"mr-4 sm:mb-0 mb-2",staticStyle:{"pointer-events":"none"}},[e._v(e._s(e.__("Upload photo")))]),e._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"avatar",id:"avatar"},on:{change:e.onUpload}})],1)])],1),e._v(" "),a("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":e.__("email")},model:{value:e.userData.email,callback:function(t){e.$set(e.userData,"email",t)},expression:"userData.email"}})],1)]),e._v(" "),a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":e.__("first name")},model:{value:e.userData.first_name,callback:function(t){e.$set(e.userData,"first_name",t)},expression:"userData.first_name"}})],1)]),e._v(" "),a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":e.__("last name")},model:{value:e.userData.last_name,callback:function(t){e.$set(e.userData,"last_name",t)},expression:"userData.last_name"}})],1)]),e._v(" "),a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":e.__("mobile")},model:{value:e.userData.mobile,callback:function(t){e.$set(e.userData,"mobile",t)},expression:"userData.mobile"}}),e._v(" "),e.shouldShowMobileVerification?a("div",[null==e.userData.mobile_verified?a("vs-alert",{staticClass:" my-4",attrs:{"icon-pack":"feather",icon:"icon-info",color:"warning"}},[a("span",[e._v("   "+e._s(e.__("Your mobile phone is not verified"))+".   "),a("a",{staticClass:"hover:underline",attrs:{href:"#"},on:{click:e.sendCode}},[e._v(e._s(e.__("Send Code")))])])]):e._e(),e._v(" "),0==e.userData.mobile_verified?a("vs-alert",{staticClass:" my-4",attrs:{"icon-pack":"feather",icon:"icon-info",color:"warning"}},[a("span",[e._v("   "+e._s(e.__("Your mobile phone is not verified"))+".   "),a("a",{staticClass:"hover:underline",attrs:{href:"#"},on:{click:e.sendCode}},[e._v(e._s(e.__("Resend Code")))])])]):e._e()],1):e._e()],1)])],1),e._v(" "),a("div",[a("vs-button",{staticClass:"ml-auto mt-2",on:{click:e.updateProfile}},[e._v(e._s(e.__("Save Changes")))])],1),e._v(" "),a("vs-prompt",{attrs:{title:e.__("Confirm code"),"accept-text":e.__("Confirm"),"cancel-text":e.__("Cancel"),active:e.isCodeModalActive},on:{cancel:function(t){e.verifyCode=""},accept:e.onCodeSubmit,close:e.close}},[a("div",{staticClass:"con-exemple-prompt"},[a("span",[e._v(e._s(e.__("Enter the verification code")))]),e._v(" "),a("vs-input",{staticClass:"mt-3 w-full",attrs:{"vs-placeholder":e.__("Code")},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}})],1)])],1)}),[],!1,null,null,null).exports,f=a(774);function v(e,t,a,r,s,o,n){try{var i=e[o](n),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(r,s)}var p={data:function(){return{form:new f.a({current_password:"",password:"",password_confirmation:""})}},computed:{activeUserInfo:function(){return this.$store.state.AppActiveUser},isDisabled:function(){return!this.form.current_password||!this.form.password||!this.form.password_confirmation}},methods:{changePassword:function(){var e,t=this;return(e=s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.form.put("".concat(window.config.root_url,"/user/password"));case 3:e.sent,Iracode.success(t.__("Your password changed successfully")),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,a=arguments;return new Promise((function(r,s){var o=e.apply(t,a);function n(e){v(o,r,s,n,i,"next",e)}function i(e){v(o,r,s,n,i,"throw",e)}n(void 0)}))})()},hasValidationError:function(e){return!(!this.form.errors||!this.form.errors.has(e))||void 0},validationError:function(e){return this.form.errors?this.form.errors.first(e):void 0}}},m={components:{ProfileGeneral:d,ProfileChangePassword:Object(u.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-card",{attrs:{"no-shadow":""}},[a("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:e.hasValidationError("current_password"),"danger-text":e.validationError("current_password"),"label-placeholder":e.__("Old Password")},model:{value:e.form.current_password,callback:function(t){e.$set(e.form,"current_password",t)},expression:"form.current_password"}}),e._v(" "),a("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:e.hasValidationError("password"),"danger-text":e.validationError("password"),"label-placeholder":e.__("New Password")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),a("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:e.hasValidationError("password_confirmation"),"danger-text":e.validationError("password_confirmation"),"label-placeholder":e.__("Confirm Password")},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}}),e._v(" "),a("div",{staticClass:"flex flex-wrap items-center justify-end"},[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:e.isDisabled},on:{click:e.changePassword}},[e._v(e._s(e.__("Save Changes")))]),e._v(" "),a("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"}},[e._v(e._s(e.__("Reset")))])],1)],1)}),[],!1,null,null,null).exports},created:function(){this.$route.query.tab&&(console.log(this.$route.query.tab),this.activeTab=this.$route.query.tab)},data:function(){return{activeTab:0}},computed:{isSmallerScreen:function(){return this.$store.state.windowWidth<768}}},_=(a(894),Object(u.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vs-tabs",{key:e.isSmallerScreen,staticClass:"tabs-shadow-none",attrs:{position:e.isSmallerScreen?"top":"left",id:"profile-tabs"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-user",label:e.isSmallerScreen?"":e.__("General")}},[a("div",{staticClass:"tab-general md:ml-4 md:mt-0 mt-4 ml-0"},[a("profile-general",{on:{advancedResume:function(t){e.activeTab=1}}})],1)]),e._v(" "),a("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-lock",label:e.isSmallerScreen?"":e.__("Change Password")}},[a("div",{staticClass:"tab-change-pwd md:ml-4 md:mt-0 mt-4 ml-0"},[a("profile-change-password")],1)]),e._v(" "),a("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-info",label:e.isSmallerScreen?"":e.__("Login history")}},[a("div",{staticClass:"tab-info md:ml-4 md:mt-0 mt-4 ml-0"},[a("login-history")],1)])],1)}),[],!1,null,null,null));t.default=_.exports},774:function(e,t,a){"use strict";var r=a(536),s=a.n(r);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function e(t){return o(this,e),new s.a(t,{http:window.Iracode.getHttp()})}},807:function(e,t,a){var r=a(895);"string"==typeof r&&(r=[[e.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(73)(r,s);r.locals&&(e.exports=r.locals)},894:function(e,t,a){"use strict";a(807)},895:function(e,t,a){(e.exports=a(72)(!1)).push([e.i,"#profile-tabs .vs-tabs--content {\n  padding: 0;\n}\n.vue-form-wizard .wizard-progress-bar {\n  float: right;\n}\n.vue-form-wizard .wizard-card-footer .wizard-footer-left {\n  float: right;\n}\n.vue-form-wizard .wizard-card-footer .wizard-footer-right {\n  float: left;\n}",""])}}]);