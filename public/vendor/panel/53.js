(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{680:function(t,e,n){"use strict";n.r(e);var r=n(63),i=n.n(r),s=n(730),o=n(731),a=n(735);function c(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){c(s,r,i,o,a,"next",t)}function a(t){c(s,r,i,o,a,"throw",t)}o(void 0)}))}}var l,p,f={components:{},mixins:[o.a,a.a],data:function(){return{form:new s.a({file:"",patient_id:""}),model:"Modules\\User\\Models\\NIFFRCase",inputs:{file:{type:"vs-input",field_type:"text"},patient_id:{field_type:"relation",foreign_key:"patient_id",relation_name:"patient",options:[],selected:{},searchUrl:"/user/api/patients",titleField:"name"}}}},props:{},computed:{},created:(p=u(i.a.mark((function t(){var e,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/user/api/niffr_cases/".concat(this.$route.params.id));case 2:e=t.sent,(n=e.data).success&&(r=n.data,this.$store.dispatch("setCurrentResource",r),this.populateFormFields(r)),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)}),mounted:function(){},methods:{onSubmit:(l=u(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.form.put("/user/api/niffr_cases/".concat(this.$route.params.id));case 2:t.sent.success&&Iracode.success(this.__("Niffrcase Updated Successfully")),"close"==e?this.$router.push("/user/niffr_cases"):this.form.reset();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})}},d=n(53),v=Object(d.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-base"},[n("vx-card",{scopedSlots:t._u([{key:"actions",fn:function(){return[n("vs-button",{attrs:{color:"primary",to:"/user/niffr_cases",type:"filled"}},[t._v(t._s(t.__("Back")))])]},proxy:!0}])},[t._v(" "),n("form",{on:{submit:t.onSubmit}},[n("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}},[n("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[n("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[n("vs-col",{staticClass:"justify-end",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[n("span",[t._v(t._s(t.__("patient")))])]),t._v(" "),n("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[n("v-select",{attrs:{dir:t.$vs.rtl?"rtl":"ltr",value:t.inputs.patient_id.selected,label:"name",filterable:!1,options:t.inputs.patient_id.options},on:{input:function(e){return t.onRelationSelect("patient_id",e)},search:function(e,n){return t.onRelationSearch("patient_id",e,n)}}},[n("template",{slot:"no-options"},[t._v("\n                                    "+t._s(t.__("Type to search"))+"\n                                ")])],2)],1)],1)],1),t._v(" "),n("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"6"}},[n("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[n("vs-col",{staticClass:"justify-end pr-5",attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"3"}},[n("span",[t._v(t._s(t.__("File")))]),t._v(" "),n("span",{staticClass:"ml-1 text-red"},[t._v("*")])]),t._v(" "),n("vs-col",{attrs:{"vs-type":"flex","vs-align":"center","vs-lg":"9"}},[n(t.inputs.file.type,{tag:"component",staticClass:"w-full",attrs:{danger:t.hasValidationError("file"),"danger-text":t.validationError("file"),name:"file",type:"text"},model:{value:t.form.file,callback:function(e){t.$set(t.form,"file",e)},expression:"form.file"}})],1)],1)],1)],1),t._v(" "),n("vs-row",{staticClass:"mb-6",attrs:{"vs-type":"flex","vs-w":"12"}}),t._v(" "),n("div",{staticClass:"flex justify-end mt-16"},[n("div",{staticClass:"flex"},[n("vs-button",{staticClass:"mr-3 mb-2",attrs:{color:"success"},on:{click:function(){return t.onSubmit("close")}}},[t._v(t._s(t.__("Save")))]),t._v(" "),n("vs-button",{staticClass:"mb-2",attrs:{color:"warning"},on:{click:function(e){return t.form.reset()}}},[t._v(t._s(t.__("Clear")))])],1)])],1)])],1)}),[],!1,null,null,null);e.default=v.exports},730:function(t,e,n){"use strict";var r=n(543),i=n.n(r);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=function t(e){return s(this,t),new i.a(e,{http:window.Iracode.getHttp()})}},731:function(t,e,n){"use strict";var r,i,s,o=n(63),a=n.n(o);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){var r;return r=function(t,e){if("object"!=d(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==d(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){p(s,r,i,o,a,"next",t)}function a(t){p(s,r,i,o,a,"throw",t)}o(void 0)}))}}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a={data:function(){var t=this;return{uploadServer:{url:window.config.uploadBasePath,timeout:36e6,load:function(t,e,n,r,i,s){t.indexOf("/null")>-1&&(console.log("source",t),i());var o=new Request(t);fetch(o).then((function(t){t.blob().then((function(t){e(t)}))}))},process:{url:"/process",method:"POST",headers:{Authorization:"Bearer ".concat(this.$store.state.auth.accessToken),"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},withCredentials:!1,onload:function(e){return"object"!=d(e)&&(e=JSON.parse(e)),console.log(t.inputs[e.field_name],e.field_name),t.inputs[e.field_name].filepond_options["allow-multiple"]?t.form[e.field_name].push(e.key):t.form[e.field_name]=e.key,e.key},onerror:function(t){return t.data},ondata:function(e){return e.append("model",t.model),t.$route.params.id&&e.append("model_id",t.$route.params.id),e}},revert:"revert",restore:"restore",fetch:"fetch"}}},methods:{getRelationLabel:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];console.log(this,e)},onRelationSelect:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";this.inputs[t].selected=e,this.form[t]=e[n]},handleFilePondInit:function(){console.log("FilePond has initialized")},onSelect:function(t,e){this.inputs[t].selected=e,this.form[t]=e.value},onRelationSearch:(s=f(a.a.mark((function t(e,n,r){var i,s,o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=n){t.next=2;break}return t.abrupt("return");case 2:return r(!0),i=this.inputs[e],s={},i&&(s["filter[".concat(i.titleField,"]")]=n),t.next=8,this.$http.get(this.inputs[e].searchUrl,{params:s});case 8:if(o=t.sent,!(c=o.data).success){t.next=13;break}return this.inputs[e].options=c.data.items,t.abrupt("return",r(!1));case 13:this.inputs[e].options=[];case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return s.apply(this,arguments)}),hasValidationError:function(t){return!(!this.form.errors||!this.form.errors.has(t))||void 0},validationError:function(t){return this.form.errors?this.form.errors.first(t):void 0},onSelectTableSearch:(i=f(a.a.mark((function t(e,n){var r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.length){t.next=6;break}return t.next=3,this.$http.post("".concat(window.config.path_prefix,"/api/get_select_table"),u(u({},this.inputs[e].select_table_options),{},{search:n}));case 3:r=t.sent,i=r.data,this.inputs[e].options=i.data;case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},created:(r=f(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("before create called"),t.t0=a.a.keys(this.inputs);case 2:if((t.t1=t.t0()).done){t.next=14;break}if(e=t.t1.value,"relation"!==this.inputs[e].field_type){t.next=12;break}return console.log(this.inputs[e]),t.next=8,this.$http.get(this.inputs[e].searchUrl);case 8:n=t.sent,(r=n.data).success&&(this.inputs[e].options=r.data.items),this.inputs[e].options.length&&(Array.isArray(this.inputs[e].selected)||(this.form[e]=this.inputs[e].options[0].id,this.inputs[e].selected=this.inputs[e].options[0]));case 12:t.next=2;break;case 14:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}},735:function(t,e,n){"use strict";var r,i,s=n(63),o=n.n(s);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){var r;return r=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==a(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}e.a={created:(r=o.a.mark((function t(){var e,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=o.a.keys(this.inputs);case 1:if((t.t1=t.t0()).done){t.next=12;break}if(e=t.t1.value,"relation"!==this.inputs[e].field_type){t.next=10;break}return console.log(this.inputs[e]),t.next=7,this.$http.get(this.inputs[e].searchUrl);case 7:n=t.sent,(r=n.data).success&&(this.inputs[e].options=r.data.items);case 10:t.next=1;break;case 12:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var s=r.apply(t,e);function o(t){l(s,n,i,o,a,"next",t)}function a(t){l(s,n,i,o,a,"throw",t)}o(void 0)}))},function(){return i.apply(this,arguments)}),methods:{populateFormFields:function(t){var e=this,n={},r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.form);console.log("populating",r,t);var i=function(i){if(e.inputs[i])if("relation"==e.inputs[i].field_type){n[i]=void 0!==t[i]?t[i]:"",console.log(n[i]);var s=e.inputs[i].options.findIndex((function(e){return e.id==t[i]}));console.log("district",s,t[i],e.inputs[i].options),s>-1&&(e.inputs[i].selected=e.inputs[i].options[s])}else if("select"==e.inputs[i].field_type){n[i]=void 0!==t[i]?t[i]:"";var o=e.inputs[i].options.findIndex((function(e){return e.value==t[i]}));o>-1&&(e.inputs[i].selected=e.inputs[i].options[o])}else["filepond","filepond_image"].includes(e.inputs[i].field_type)?(e.inputs[i].files&&Array.isArray(e.inputs[i].files)&&(Array.isArray(t[i])?(console.log(t[i]),t[i].forEach((function(t){e.inputs[i].files.push({source:e.serverUrl(t),options:{type:"local",load:!1}})}))):e.inputs[i].files.push({source:e.serverUrl(t[i]),options:{type:"local",load:!1}})),Array.isArray(r[i])?n[i]=void 0!==t[i]?Array.isArray(t[i])?t[i]:[]:"":n[i]=void 0!==t[i]?t[i]:""):"password"!=e.inputs[i].field_type&&(n[i]=void 0!==t[i]?t[i]:"")};for(var s in r)i(s);this.form.populate(n)}}}}}]);