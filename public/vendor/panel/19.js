(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{730:function(t,e,a){"use strict";var r=a(543),s=a.n(r);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=function t(e){return o(this,t),new s.a(e,{http:window.Iracode.getHttp()})}},760:function(t,e,a){var r=a(841);"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(74)(r,s);r.locals&&(t.exports=r.locals)},840:function(t,e,a){"use strict";a(760)},841:function(t,e,a){(t.exports=a(73)(!1)).push([t.i,"#profile-tabs .vs-tabs--content {\n  padding: 0;\n}\n.vue-form-wizard .wizard-progress-bar {\n  float: right;\n}\n.vue-form-wizard .wizard-card-footer .wizard-footer-left {\n  float: right;\n}\n.vue-form-wizard .wizard-card-footer .wizard-footer-right {\n  float: left;\n}",""])},961:function(t,e,a){"use strict";a.r(e);var r=a(63),s=a.n(r);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,a,r,s,o,n){try{var i=t[o](n),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(r,s)}function i(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var o=t.apply(e,a);function i(t){n(o,r,s,i,l,"next",t)}function l(t){n(o,r,s,i,l,"throw",t)}i(void 0)}))}}function l(t,e,a){var r;return r=function(t,e){if("object"!=o(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==o(r)?r:String(r))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c,u,d,f={data:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach((function(e){l(t,e,a[e])}))}return t}({},this.$store.state.auth.userInfo);return{isCodeModalActive:!1,verifyCode:"",userData:{first_name:t.first_name,last_name:t.last_name,mobile:t.mobile||"",email:t.email||"",avatar:t.photoURL,mobile_verified:t.profile?t.profile.mobile_verified:0},avatarPreview:t.photoURL,location:{city:t?t.city:{},province:t?t.province:{}}}},mounted:function(){console.log(this.userData)},computed:{shouldShowMobileVerification:function(){return window.vuexy.mobile_verification}},methods:{advancedResume:function(){console.log(this.$parent)},onCodeSubmit:(d=i(s.a.mark((function t(){var e,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isCodeModalActive=!0,t.next=3,this.$http.post("".concat(window.config.root_url,"/userverification/api/validate"),{mobile:this.userData.mobile,type:"mobile",code:this.verifyCode,reason:"verification"});case 3:if(e=t.sent,!(a=e.data).ok){t.next=13;break}return Iracode.success(a.message),this.isCodeModalActive=!1,this.userData.mobile_verified=!0,t.next=11,this.$auth.handleSessionAuthentication();case 11:t.next=14;break;case 13:Iracode.error(a.message);case 14:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),close:function(){},sendCode:function(){this.$http.post("".concat(window.config.root_url,"/userverification/api/send"),{mobile:this.userData.mobile,type:"mobile",reason:"verification"}),this.isCodeModalActive=!0},onUpload:(u=i(s.a.mark((function t(e){var a,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.files&&e.target.files[0]&&(this.userData.avatar=e.target.files[0],(a=new FileReader).onload=function(t){return r.avatarPreview=t.target.result},a.readAsDataURL(e.target.files[0]));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)}),updateProfile:(c=i(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Iracode.loading(),(e=Iracode.objToFormData(this.userData)).append("_method","PUT"),t.next=5,this.$http.post(this.serverUrl("user/profile-information"),e);case 5:return t.sent.data,t.next=9,this.$auth.handleSessionAuthentication();case 9:Iracode.success(this.__("Your profile updated successfully")),Iracode.close_loading();case 11:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})}},v=a(53),p=Object(v.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"flex flex-wrap items-center mb-4"},[a("vs-avatar",{staticClass:"mr-4 mb-4",attrs:{src:t.avatarPreview,size:"70px"}}),t._v(" "),a("div",[a("label",{staticClass:"inline-block",staticStyle:{cursor:"pointer"},attrs:{for:"avatar"}},[a("vs-button",{staticClass:"mr-4 sm:mb-0 mb-2",staticStyle:{"pointer-events":"none"}},[t._v(t._s(t.__("Upload photo")))]),t._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"file",name:"avatar",id:"avatar"},on:{change:t.onUpload}})],1)])],1),t._v(" "),a("vs-row",{attrs:{"vs-type":"flex","vs-w":"12"}},[a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("email")},model:{value:t.userData.email,callback:function(e){t.$set(t.userData,"email",e)},expression:"userData.email"}})],1)]),t._v(" "),a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("first name")},model:{value:t.userData.first_name,callback:function(e){t.$set(t.userData,"first_name",e)},expression:"userData.first_name"}})],1)]),t._v(" "),a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("last name")},model:{value:t.userData.last_name,callback:function(e){t.$set(t.userData,"last_name",e)},expression:"userData.last_name"}})],1)]),t._v(" "),a("vs-col",{attrs:{"vs-type":"flex","vs-w":"6"}},[a("div",{staticClass:"w-11/12"},[a("vs-input",{staticClass:"w-full mb-4",attrs:{"label-placeholder":t.__("mobile")},model:{value:t.userData.mobile,callback:function(e){t.$set(t.userData,"mobile",e)},expression:"userData.mobile"}}),t._v(" "),t.shouldShowMobileVerification?a("div",[null==t.userData.mobile_verified?a("vs-alert",{staticClass:" my-4",attrs:{"icon-pack":"feather",icon:"icon-info",color:"warning"}},[a("span",[t._v("   "+t._s(t.__("Your mobile phone is not verified"))+".   "),a("a",{staticClass:"hover:underline",attrs:{href:"#"},on:{click:t.sendCode}},[t._v(t._s(t.__("Send Code")))])])]):t._e(),t._v(" "),0==t.userData.mobile_verified?a("vs-alert",{staticClass:" my-4",attrs:{"icon-pack":"feather",icon:"icon-info",color:"warning"}},[a("span",[t._v("   "+t._s(t.__("Your mobile phone is not verified"))+".   "),a("a",{staticClass:"hover:underline",attrs:{href:"#"},on:{click:t.sendCode}},[t._v(t._s(t.__("Resend Code")))])])]):t._e()],1):t._e()],1)])],1),t._v(" "),a("div",[a("vs-button",{staticClass:"ml-auto mt-2",on:{click:t.updateProfile}},[t._v(t._s(t.__("Save Changes")))])],1),t._v(" "),a("vs-prompt",{attrs:{title:t.__("Confirm code"),"accept-text":t.__("Confirm"),"cancel-text":t.__("Cancel"),active:t.isCodeModalActive},on:{cancel:function(e){t.verifyCode=""},accept:t.onCodeSubmit,close:t.close}},[a("div",{staticClass:"con-exemple-prompt"},[a("span",[t._v(t._s(t.__("Enter the verification code")))]),t._v(" "),a("vs-input",{staticClass:"mt-3 w-full",attrs:{"vs-placeholder":t.__("Code")},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}})],1)])],1)}),[],!1,null,null,null).exports,m=a(730);function h(t,e,a,r,s,o,n){try{var i=t[o](n),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(r,s)}var _,b,w={data:function(){return{form:new m.a({current_password:"",password:"",password_confirmation:""})}},computed:{activeUserInfo:function(){return this.$store.state.AppActiveUser},isDisabled:function(){return!this.form.current_password||!this.form.password||!this.form.password_confirmation}},methods:{changePassword:(_=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.form.put("".concat(window.config.root_url,"/user/password"));case 3:t.sent,Iracode.success(this.__("Your password changed successfully")),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})),b=function(){var t=this,e=arguments;return new Promise((function(a,r){var s=_.apply(t,e);function o(t){h(s,a,r,o,n,"next",t)}function n(t){h(s,a,r,o,n,"throw",t)}o(void 0)}))},function(){return b.apply(this,arguments)}),hasValidationError:function(t){return!(!this.form.errors||!this.form.errors.has(t))||void 0},validationError:function(t){return this.form.errors?this.form.errors.first(t):void 0}}},y={components:{ProfileGeneral:p,ProfileChangePassword:Object(v.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{"no-shadow":""}},[a("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:t.hasValidationError("current_password"),"danger-text":t.validationError("current_password"),"label-placeholder":t.__("Old Password")},model:{value:t.form.current_password,callback:function(e){t.$set(t.form,"current_password",e)},expression:"form.current_password"}}),t._v(" "),a("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:t.hasValidationError("password"),"danger-text":t.validationError("password"),"label-placeholder":t.__("New Password")},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),a("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password",danger:t.hasValidationError("password_confirmation"),"danger-text":t.validationError("password_confirmation"),"label-placeholder":t.__("Confirm Password")},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}}),t._v(" "),a("div",{staticClass:"flex flex-wrap items-center justify-end"},[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:t.isDisabled},on:{click:t.changePassword}},[t._v(t._s(t.__("Save Changes")))]),t._v(" "),a("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"}},[t._v(t._s(t.__("Reset")))])],1)],1)}),[],!1,null,null,null).exports},created:function(){this.$route.query.tab&&(console.log(this.$route.query.tab),this.activeTab=this.$route.query.tab)},data:function(){return{activeTab:0}},computed:{isSmallerScreen:function(){return this.$store.state.windowWidth<768}}},C=(a(840),Object(v.a)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-tabs",{key:t.isSmallerScreen,staticClass:"tabs-shadow-none",attrs:{position:t.isSmallerScreen?"top":"left",id:"profile-tabs"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-user",label:t.isSmallerScreen?"":t.__("General")}},[a("div",{staticClass:"tab-general md:ml-4 md:mt-0 mt-4 ml-0"},[a("profile-general",{on:{advancedResume:function(e){t.activeTab=1}}})],1)]),t._v(" "),a("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-lock",label:t.isSmallerScreen?"":t.__("Change Password")}},[a("div",{staticClass:"tab-change-pwd md:ml-4 md:mt-0 mt-4 ml-0"},[a("profile-change-password")],1)]),t._v(" "),a("vs-tab",{attrs:{"icon-pack":"feather",icon:"icon-info",label:t.isSmallerScreen?"":t.__("Login history")}},[a("div",{staticClass:"tab-info md:ml-4 md:mt-0 mt-4 ml-0"},[a("login-history")],1)])],1)}),[],!1,null,null,null));e.default=C.exports}}]);